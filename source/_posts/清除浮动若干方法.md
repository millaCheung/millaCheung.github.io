---
title: 清除浮动若干方法
comment: true
date: 2020-04-23 09:55:32
tags:
 - CSS
---
### 1. 为什么清除浮动

由于父级盒子很多情况下，不方便给高度，但是子盒子浮动又不占位置，最后父盒子高度为 0 时，就会影响下面的标准流盒子

- 由于浮动元素不再占用原文档流的位置，所以它会对后面的元素排版产生影响

<!-- more -->

### 2. 清除浮动本质

- 清除浮动的本质时清除浮动元素造成的影响

- 如果父盒子本身有高度，则不需要清除浮动

- 清除浮动之后，父级就会根据浮动的子盒子自动检测高度。父级有了高度，就不会影响下面的标准流了

语法：

```css
选择器 {
  clear: 属性值;
}
```

| 属性值 | 描述                                       |
| ------ | ------------------------------------------ |
| left   | 不允许左侧有浮动元素（清除左侧浮动的影响） |
| right  | 不允许右侧有浮动元素（清除右侧浮动的影响） |
| both   | 同时清除左右两侧浮动的影响                 |

实际工作中，只用 `clear: both;`

**清除浮动的策略：闭合浮动**（只让浮动在父盒子内部影响，不影响父盒子外面的其它盒子）

### 3. 清除浮动方法

1. 额外标签法 也称为隔墙法，是 W3C 推荐的做法
2. 父级添加 `overflow` 属性
3. 父级添加 `after` 伪元素
4. 父亲添加双伪元素

### 4. 清除浮动——额外标签法

额外标签法也称为隔墙法，是 W3C 推荐的做法

额外标签法会在浮动元素末尾添加一个空的标签。例如 `<div style="clear: both"></div>`，或者其它标签（如`<br />`等）

- 优点：通俗易懂，书写方便

- 缺点：添加许多无意义的标签，结构化较差

注意：要求新的空标签必须是块级元素

### 5. 清除浮动——父级添加 overflow

可以给父级添加 `overflow` 属性，将其属性值设置为 `hidden`、`auto` 或 `scroll`

- 优点：代码简洁

- 缺点：无法显示溢出的部分

设置 overflow 为什么能够清除浮动？

引入一个概念：[BFC](https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context)（Block Formatting Context），块级格式化上下文。BFC 中包括一项 `overflow` 值不为 `visible` 的块元素会创建块格式化上下文，设置 `overflow` 为 `hidden` 满足了创建一个 BFC 的条件，其实就是创建 BFC，利用 BFC 固有特性清除浮动，具体详情见 [MDN](https://developer.mozilla.org/zh-CN/)

### 6. 清除浮动——`:after` 伪元素法

`:after` 方式是额外标签法的升级版。也是给父元素添加

```css
.clearfix::after {
  content: "";
  display: block;
  height: 0;
  clear: both;
  visibility: hidden;
}
.clearfix {  /* IE6、7专有 */
  *zoom: 1;
}
```

- 优点：没有增加标签，结构更简单

- 缺点：不能照顾低版本浏览器

- 代表网站：百度、淘宝、网易等

### 7. 清除浮动——双伪元素法

也是给父元素添加

```css
.clearfix::before, .clearfix::after {
  content: "";
  display: table;
}
.clearfix::after {
  clear: both;
}
.clearfix {
  *zoom: 1;
}
```

- 优点：代码更简洁

- 缺点：不能照顾低版本浏览器

- 代表网站：小米、腾讯等

### 8. 总结

为什么要清除浮动？

1. 父级没高度
2. 子盒子浮动
3. 影响下面布局

| 清除浮动的方式         | 优点               | 缺点                               |
| ---------------------- | ------------------ | ---------------------------------- |
| 额外标签法（隔墙法）   | 通俗易懂，书写方便 | 添加许多无意义的标签，结构化较差   |
| 父级 overflow: hidden; | 书写简单           | 无法显示溢出的部分                           |
| 父级 :after 伪元素     | 符合结构语义化     | 由于 IE6/7 不支持 `:after`，兼容性较差 |
| 父级双伪元素           | 符合结构语义化     | 由于 IE6/7不支持 `:after :before`，兼容性较差 |
